!function(e){function t(t){for(var i,s,o=t[0],u=t[1],l=t[2],c=0,d=[];c<o.length;c++)s=o[c],a[s]&&d.push(a[s][0]),a[s]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(h&&h(t);d.length;)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var h=u;r.push([92,1]),n()}({64:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);n(64),n(16),n(66),n(57);var i=n(94),a=n(95),r=n(96),s=n(97);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=0,this.setupRenderer(),this.setupGeometry(),this.setupProgram(),this.setupMesh(),window.addEventListener("resize",this.onResize.bind(this),!1),this.onResize(),requestAnimationFrame(this.animate.bind(this))}var t,n,u;return t=e,(n=[{key:"setupRenderer",value:function(){this.renderer=new i.a({alpha:!0}),this.gl=this.renderer.gl,this.gl.canvas.classList.add("grain"),document.body.appendChild(this.gl.canvas)}},{key:"setupGeometry",value:function(){this.geometry=new a.a(this.gl,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}})}},{key:"setupProgram",value:function(){this.vertex="#define GLSLIFY 1\nattribute vec2 uv;\n    attribute vec2 position;\n    varying vec2 vUv;\n    \n    void main() {\n      vUv = uv;\n      gl_Position = vec4(position, 0, 1);\n    }",this.fragment="precision highp float;\n#define GLSLIFY 1\n\nuniform float uTime;\nvarying vec2 vUv;\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec2 uv = vUv;\n    float r = rand(uv * uTime);\n    gl_FragColor = vec4(r, r, r, 0.025);\n}",this.program=new r.a(this.gl,{vertex:this.vertex,fragment:this.fragment,uniforms:{uTime:{value:0}}})}},{key:"setupMesh",value:function(){this.mesh=new s.a(this.gl,{geometry:this.geometry,program:this.program})}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.update(),this.render()}},{key:"update",value:function(){this.time++,this.time%5==0&&(this.program.uniforms.uTime.value+=1)}},{key:"render",value:function(){this.renderer.render({scene:this.mesh})}},{key:"onResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight)}}])&&o(t.prototype,n),u&&o(t,u),e}(),l=(n(59),n(63),n(41),n(3)),h=n(0);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerId=t.containerId,this.canvasId=t.canvasId,this.container=document.getElementById(this.containerId),this.thumbnails=document.querySelectorAll(".".concat(t.thumbnailsClass)),this.prevBtn=document.querySelector(".".concat(t.prevClass)),this.nextBtn=document.querySelector(".".concat(t.nextClass)),this.width=this.container.offsetWidth,this.height=this.container.offsetWidth,this.images=t.images,this.tl=h.a.timeline(),this.ease=t.ease,this.textures=[],this.scene=null,this.camera=null,this.renderer=null,this.vertex="varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fragment=t.fragment,this.uniforms=t.uniforms,this.intensity=t.intensity,this.width=this.container.offsetWidth,this.height=this.container.scrollHeight,this.duration=t.transitionDuration,this.autoplayDuration=t.autoplayDuration,this.easing=t.easing,this.current=null,this.loadTextures().then(function(){n.setupRenderer(),n.setupCamera(),n.setupScene(),n.setupPlane(),n.setupResize(),n.resize(),n.render(),n.addEventListeners(),n.goTo(0)})}var t,n,i;return t=e,(n=[{key:"setupRenderer",value:function(){this.renderer=new l.j({canvas:document.getElementById(this.canvasId)}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(65280,1)}},{key:"setupCamera",value:function(){this.camera=new l.d(70,this.width/this.height,.001,1e3),this.camera.position.set(0,0,2)}},{key:"setupScene",value:function(){this.scene=new l.f}},{key:"setupPlane",value:function(){this.material=new l.g({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},uniforms:{progress:{type:"f",value:0},intensity:{type:"f",value:this.intensity},texture1:{type:"f",value:null},texture2:{type:"f",value:this.textures[1]},displacement:{type:"f",value:(new l.h).load("public/displacement/02.png")},resolution:{type:"v4",value:new l.i}},vertexShader:this.vertex,fragmentShader:this.fragment}),this.plane=new l.c(new l.e(1,1,10,10),this.material),this.scene.add(this.plane)}},{key:"loadTextures",value:function(){var e=this,t=new l.a,n=new l.h(t);return this.images.forEach(function(t){e.textures.push(n.load(t))}),new Promise(function(e){t.onLoad=e})}},{key:"clickEvent",value:function(){var e=this;this.container.addEventListener("click",function(){e.next()})}},{key:"setupResize",value:function(){window.addEventListener("resize",this.resize.bind(this))}},{key:"resize",value:function(){this.width=this.container.getBoundingClientRect().width,this.height=this.container.getBoundingClientRect().height,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height;var e,t,n=l.b.degToRad(this.camera.fov),i=2*Math.tan(n/2)*this.camera.position.z,a=i*this.camera.aspect;this.plane.scale.x=a,this.plane.scale.y=i,this.imageAspect=this.textures[0].image.height/this.textures[0].image.width,this.height/this.width>this.imageAspect?(e=this.width/this.height*this.imageAspect,t=1):(e=1,t=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=e,this.material.uniforms.resolution.value.w=t;var r=this.camera.position.z;this.camera.fov=180/Math.PI*2*Math.atan(1/(2*r)),this.plane.scale.x=this.camera.aspect,this.plane.scale.y=1,this.camera.updateProjectionMatrix()}},{key:"addObjects",value:function(){this.geometry=new l.e(1,1,2,2),this.plane=new l.c(this.geometry,this.material)}},{key:"addEventListeners",value:function(){var e=this;console.log("Optimisation: use event delegationfor thumbnails."),this.thumbnails.forEach(function(t){t.addEventListener("click",e.onThumbnailClick.bind(e))}),this.prevBtn.addEventListener("click",this.prev.bind(this)),this.nextBtn.addEventListener("click",this.next.bind(this))}},{key:"prev",value:function(){var e=this.current-1>-1?this.current-1:this.textures.length-1;this.goTo(e)}},{key:"next",value:function(){var e=this.current+1<this.textures.length?this.current+1:0;this.goTo(e)}},{key:"onThumbnailClick",value:function(e){var t=e.currentTarget.getAttribute("data-thumb-index");this.goTo(t)}},{key:"goTo",value:function(e){var t=this;(e=parseInt(e))!=this.current&&(this.updateTimeline(e),this.thumbnails.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),this.thumbnails[e].classList.add("active"),h.a.to(this.material.uniforms.progress,this.duration,{value:1,onStart:function(){t.material.uniforms.texture2.value=t.textures[e]},ease:this.ease,onComplete:function(){t.current=e,t.material.uniforms.texture1.value=t.textures[e],t.material.uniforms.progress.value=0}}))}},{key:"updateTimeline",value:function(e){var t=this;if(null!=this.current){var n=this.thumbnails[this.current].querySelector(".progress");h.a.killTweensOf(n)}var i={value:0};h.a.fromTo(i,this.autoplayDuration,{value:0},{value:1,ease:"linear",onUpdate:function(){t.thumbnails[e].querySelector(".progress").style.setProperty("--progress",i.value)},onComplete:function(){t.next()}})}},{key:"render",value:function(){requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}}])&&c(t.prototype,n),i&&c(t,i),e}();n(88),n(90);function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=".js-hidden",m=1,p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.el=t.el,this.hiddenEls=this.el.querySelectorAll(v),this.scale={y:0},this.duration=t.duration||this.el.getAttribute("data-curtain-duration")||m,this.curtainScaleInCallbacks=[],this.setup()}var t,n,i;return t=e,(n=[{key:"setup",value:function(){h.a.set(this.hiddenEls,{opacity:0})}},{key:"applyCallbacks",value:function(){this.curtainScaleInCallbacks.length>0&&this.curtainScaleInCallbacks.forEach(function(e){e()})}},{key:"switchTransformOrigin",value:function(){this.el.style.setProperty("--curtain-transform-origin","50% 0%")}},{key:"displayHiddenEls",value:function(){h.a.set(this.hiddenEls,{opacity:1})}},{key:"reveal",value:function(e){var t=this;h.a.to(this.scale,{keyframes:[{y:1,duration:this.duration,onComplete:function(){t.applyCallbacks(),t.switchTransformOrigin(),t.displayHiddenEls()},delay:e},{y:0,duration:this.duration}],delay:e,onUpdate:function(){t.el.style.setProperty("--curtain-scale-x",t.scale.y)}})}},{key:"addCurtainScaleInCallback",value:function(e){this.curtainScaleInCallbacks.push(e)}}])&&f(t.prototype,n),i&&f(t,i),e}();function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logo=document.querySelector(".js-logo"),this.porscheEl=document.querySelector(".js-porsche"),this.singerEl=document.querySelector(".js-singer"),this.singerMaskEl=document.querySelector(".js-singer-mask"),this.TL=h.a.timeline(),this.setPorscheStartPosition(),this.setSingerStartPosition()}var t,n,i;return t=e,(n=[{key:"setPorscheStartPosition",value:function(){var e=this.porscheEl.getBoundingClientRect(),t=e.width,n=Math.max(Math.min(.3*window.innerWidth,500),t)/e.width,i=(innerWidth-e.width*n)/2,a=innerHeight/2-e.height*n/2;h.a.set(this.porscheEl,{scale:n,x:i-e.x,y:a-e.y})}},{key:"setSingerStartPosition",value:function(){var e=this.singerEl.getBoundingClientRect(),t=e.width,n=Math.max(Math.min(.3*window.innerWidth,500),t)/e.width,i=innerWidth/2-e.width*n/2,a=innerHeight/2-e.height*n/2,r=this.porscheEl.getBoundingClientRect(),s=-r.width/15,o=1.5*r.height;h.a.set(this.singerEl,{scale:n,x:i-e.x+s,y:a-e.y+o})}},{key:"animateIn",value:function(){var e=this;return new Promise(function(t){e.TL.to(e.singerMaskEl,2.5,{strokeDashoffset:0}),e.TL.to([e.singerEl,e.porscheEl],.5,{scale:1,x:0,y:0,onComplete:t})})}}])&&g(t.prototype,n),i&&g(t,i),e}();var w=function(){var e=window.getComputedStyle(document.documentElement).getPropertyValue("--bp-small"),t=parseInt(e);return window.innerWidth<t};var b=function(e,t,n,i,a){var r={value:i};h.a.to(r,{value:a,duration:n,onUpdate:function(){t.style.setProperty(e,r.value)}})};function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.staggerEls=document.querySelectorAll(".js-stagger"),this.curtainEls=document.querySelectorAll(".js-curtain"),this.footerEl=document.querySelector(".js-footer"),this.curtainsAnimationOffset=.5,this.TL=h.a.timeline(),this.header=new y,this.setupCurtains(),this.hideStuff()}var t,n,i;return t=e,(n=[{key:"setupCurtains",value:function(){this.curtainEls.forEach(function(e,t){e._curtain=new p({el:e,id:t,duration:.5})})}},{key:"hideStuff",value:function(){h.a.set(this.staggerEls,{opacity:0,y:20}),h.a.set(this.footerEl,{scaleX:0})}},{key:"animateStaggers",value:function(e,t){this.TL.to(e,{opacity:1,y:0,duration:.5,stagger:.1},t)}},{key:"animateCurtains",value:function(){this.TL.to(this.curtainEls,{stagger:{amount:.5,onStart:this.onStartCurtainTween}},"-=".concat(this.curtainsAnimationOffset))}},{key:"animateFooter",value:function(){var e=this;this.TL.to(this.footerEl,{duration:.5,scaleX:1,onComplete:function(){b("--gradient-opacity",e.footerEl,.5,0,.08)}},"-=".concat(this.curtainsAnimationOffset))}},{key:"onStartCurtainTween",value:function(){var e=this._targets[0];if(function(e){h.a.killTweensOf(e,"opacity,y"),e.setAttribute("style",null)}(e),e.classList.contains("js-shadow")){var t=e.closest("li");e._curtain.addCurtainScaleInCallback(function(){b("--shadow-opacity",t,.5,0,1)})}var n=e.closest(".thumbnail");n&&n.classList.contains("active")&&(n.setAttribute("style","--shadow-opacity: 0;"),e._curtain.addCurtainScaleInCallback(function(){b("--shadow-opacity",n,.5,0,1)})),e._curtain.reveal()}},{key:"animateIn",value:function(){var e=this;this.header.animateIn().then(function(){w()?e.animateInSmallScreen():e.animateInLargeScreen()})}},{key:"animateInLargeScreen",value:function(){this.animateStaggers(this.staggerEls),this.animateCurtains(),this.animateFooter()}},{key:"animateInSmallScreen",value:function(){var e=[],t=Array.from(this.staggerEls);e.push(t.shift()),e.push(t.shift()),this.animateStaggers(e),this.animateCurtains(),this.animateStaggers(t),this.animateFooter()}}])&&k(t.prototype,n),i&&k(t,i),e}();new u,new d({debug:!0,uniforms:{},intensity:.1,transitionDuration:.5,autoplayDuration:8,ease:"power2.out",images:["./public/slides/1.jpg","./public/slides/2.jpg","./public/slides/3.jpg"],containerId:"js-slideshow-container",canvasId:"slideshow",thumbnailsClass:"js-thumbnail",nextClass:"js-next",prevClass:"js-prev",fragment:"#define GLSLIFY 1\nuniform float time;\nuniform float progress;\nuniform float width;\nuniform float scaleX;\nuniform float scaleY;\nuniform float transition;\nuniform float radius;\nuniform float intensity;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D displacement;\nuniform vec4 resolution;\nvarying vec2 vUv;\nvoid main()\t{\n    vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n    vec4 d1 = texture2D(texture1, newUV);\n    vec4 d2 = texture2D(texture2, newUV);\n    float displace1 = (d1.r + d1.g + d1.b)*0.33;\n    float displace2 = (d2.r + d2.g + d2.b)*0.33;\n\n    vec4 t1 = texture2D(texture1, vec2(newUV.x, newUV.y + progress * (displace2 * intensity)));\n    vec4 t2 = texture2D(texture2, vec2(newUV.x, newUV.y + (1.0 - progress) * (displace1 * intensity)));\n    gl_FragColor = mix(t1, t2, progress);\n    /*\n    vec3 color = texture2D(texture1, vUv).rgb;\n    gl_FragColor = vec4(color, 1.0);\n    */\n}"}),new x({}).animateIn()}});
//# sourceMappingURL=app.86494669.js.map